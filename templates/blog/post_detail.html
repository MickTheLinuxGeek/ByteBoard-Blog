{% extends "blog/base.html" %}

{% block title %}{{ post.title }} - Byte Board Blog{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">
{% endblock %}

{% block content %}
    <article class="card mb-4">
        <div class="card-body">
            <h2 class="card-title mb-3">{{ post.title }}</h2>
            <p class="card-text text-muted mb-3">
                <small>
                    Posted by {{ post.author.get_full_name|default:post.author.username }} 
                    on {{ post.published_date|date:"F j, Y" }}
                </small>
            </p>
            
            <div class="mb-4">
                {% for category in post.categories.all %}
                    <a href="{% url 'blog:category_posts' category.slug %}" class="badge bg-primary text-decoration-none me-1">{{ category.name }}</a>
                {% endfor %}
                {% for tag in post.tags.all %}
                    <a href="{% url 'blog:tag_posts' tag.slug %}" class="badge bg-secondary text-decoration-none me-1">{{ tag.name }}</a>
                {% endfor %}
            </div>
            
            <div class="card-text post-content">
                {{ post.content|linebreaks }}
            </div>
        </div>
    </article>
    
    <div class="d-flex justify-content-between mb-4">
        <a href="{% url 'blog:home' %}" class="btn btn-outline-primary">&larr; Back to Posts</a>
        
        <div class="social-sharing">
            <span class="me-2">Share:</span>
            <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}&text={{ post.title }}" 
               target="_blank" class="btn btn-sm btn-outline-primary me-1">
                Twitter
            </a>
            <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" 
               target="_blank" class="btn btn-sm btn-outline-primary me-1">
                Facebook
            </a>
            <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ request.build_absolute_uri }}&title={{ post.title }}" 
               target="_blank" class="btn btn-sm btn-outline-primary">
                LinkedIn
            </a>
        </div>
    </div>
    
    <!-- Disqus Comments -->
    <div id="disqus_thread" class="mt-5"></div>
    <script>
        var disqus_config = function () {
            this.page.url = '{{ request.build_absolute_uri }}';
            this.page.identifier = '{{ post.slug }}';
        };
        (function() {
            var d = document, s = d.createElement('script');
            s.src = 'https://byteboard.disqus.com/embed.js';  // Replace with your Disqus shortname
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
{% endblock %}

{% block extra_js %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        document.querySelectorAll('pre code').forEach((el) => {
            hljs.highlightElement(el);
        });
    });
</script>
{% endblock %}